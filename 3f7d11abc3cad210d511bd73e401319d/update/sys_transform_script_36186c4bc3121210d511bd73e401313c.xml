<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_script">
    <sys_transform_script action="INSERT_OR_UPDATE">
        <active>false</active>
        <map display_value="AD_Managed_Folders">9cb4a447c3121210d511bd73e40131f5</map>
        <order>100</order>
        <script><![CDATA[(function runTransformScript(source, map, log, target /*undefined onStart*/ ) {

    // Add your code here

    gs.info('Autobahn addMembers CN = ' + source.u_cn);
    var adGroupsSysId = target.sys_id;
    gs.info('Autobahn addMembers CN target sys_id = ' + adGroupsSysId);

    var arrMembersNewBase = source.u_member.split('^');

    var arrMemberGroupsNew = [];
    var arrMembersNew = [];
    for (var i = 0; i < arrMembersNewBase.length; i++) {
        var isGroup = arrMembersNewBase[i].includes("OU=Groups");
        if (isGroup == true) {
            var DNObject = new global.LDAPManagedFoldersUtils();
            var CN = DNObject.getCN(arrMembersNewBase[i]);
            arrMemberGroupsNew.push(CN.substring(3));
            //gs.info('Autobahn addMembers Groups ' + arrMembersNewBase[i] + ' | ' + CN);
        } else {
            var DNObject = new global.LDAPManagedFoldersUtils();
            var CN = DNObject.getCN(arrMembersNewBase[i]);
			var CNValue = CN.substring(3)
            arrMembersNew.push(CNValue);
            //gs.info('Autobahn addMembers Users ' + arrMembersNewBase[i] + ' | ' + CN);
        }

    }

    arrMemberGroupsNew.sort();
    arrMembersNew.sort();

	for (j = 0; j < arrMemberGroupsNew.length; j++) {
		gs.info('Autobahn addMembers Groups: ' + arrMemberGroupsNew[j]);
	}

	for (j = 0; j < arrMembersNew.length; j++) {
		gs.info('Autobahn addMembers Users: ' + arrMembersNew[j]);
	}	

})(source, map, log, target);]]></script>
        <sys_class_name>sys_transform_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-12-10 07:37:40</sys_created_on>
        <sys_id>36186c4bc3121210d511bd73e401313c</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>onAfter</sys_name>
        <sys_package display_value="AdB Data Source" source="3f7d11abc3cad210d511bd73e401319d">3f7d11abc3cad210d511bd73e401319d</sys_package>
        <sys_policy/>
        <sys_scope display_value="AdB Data Source">3f7d11abc3cad210d511bd73e401319d</sys_scope>
        <sys_update_name>sys_transform_script_36186c4bc3121210d511bd73e401313c</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-12-10 07:37:57</sys_updated_on>
        <when>onAfter</when>
    </sys_transform_script>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>36186c4bc3121210d511bd73e401313c</id>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-12-10 07:37:39</sys_created_on>
        <sys_id>7a38684bc3121210d511bd73e401316c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-12-10 07:37:39</sys_updated_on>
        <table>sys_transform_script</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
